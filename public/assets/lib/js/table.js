var Table=function(t,e){var i=$(t),n=$.extend({entityCheckbox:!1},e);i.on("change","input[name=__id_all]",function(){var t=$(this).is(":checked"),e=$("input[name=__id_all]");e.is(":checked")!=t&&e.prop("checked",t).trigger("change");var i=[];$('input[name="__id[]"]').each(function(e,n){var d=$(n);d.is(":checked")!=t&&(i.push(d),d.prop("checked",t))});for(var n=0;n<i.length;n++)i[n].trigger("change");return!1}),i.on("change",'input[name="__id[]"]',function(){var t=$('input[name="__id[]"]').length==$('input[name="__id[]"]:checked').length,e=$("input[name=__id_all]");e.is(":checked")!=t&&e.prop("checked",t)}),this.loading=function(){if(i.find("thead").length){var t=i.find("thead > tr > th").length;i.find("tbody").html('<tr><td colspan="'+t+'"><div class="table-loading"><i class="uk-icon-spinner uk-icon-spin"></i> 正在玩命加载...</div></td></tr>')}else i.html('<tbody><tr><td><div class="table-loading"><i class="uk-icon-spinner uk-icon-spin"></i> 正在玩命加载...</div></td></tr></tbody>')},this.render=function(t){var e=t.list,d=t.head,a=[],h=0,r=[];r.push("<thead><tr>"),n.entityCheckbox&&(r.push('<th width="10"> <input type="checkbox" name="__id_all" /> </th>'),h++);for(var c=0;c<d.length;c++)r.push('<th data-item="'+d[c].field+'" '),"order"in d[c]&&r.push(' data-order="'+d[c].order+'" '),"attr"in d[c]&&r.push(d[c].attr+" "),"orderAble"in d[c]&&r.push(" data-orderAble "),r.push(">"+d[c].title+"</th>"),a.push(d[c].field),h++;if(r.push("</tr></thead><tbody>"),0==e.length)r.push('<tr><td colspan="'+h+'"><div class="table-none">暂无数据</div></td></tr>');else for(var c=0;c<e.length;c++){var l=e[c];r.push('<tr data-item-id="'+l._id+'">'),n.entityCheckbox&&r.push('<td> <input type="checkbox" name="__id[]" value="'+l._id+'" /> </td>');for(var o=0;o<a.length;o++)r.push('<td data-item="'+a[o]+'">'),r.push(l[a[o]]),r.push("</td>");r.push("</tr>")}r.push("</tbody>"),i.html(r.join("")),i.find("tbody > tr").each(function(t,i){$(i).data("data",e[t])})}};module.exports=Table;